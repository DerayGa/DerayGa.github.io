<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
	<title>Deray 嘎嘎嘎</title>
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>
	<link type='text/css' rel='stylesheet' href='css/jquery.capty.css'/>
	<script src='js/jquery.min.js'></script>
	<script src='js/masonry.pkgd.min.js'></script>
	<script src='js/jquery.capty.min.js'></script>
	<style>
		body{
			padding: 0px;
			margin: 0px;
		}
		.capty-wrapper{
			display: inline-block;
		}
		.capty-caption div{
			font-size:16px;
			font-family: '微軟正黑體', arial;
			text-align: center;
		}
		.grid-item:hover .capty-caption div{
			font-size:18px;
		}

		.grid-item {
			width: 342px;
			display: inline-block;
		}
	</style>
</head>
<body>
	<div class='grid'>
	</div>
</body>

<script type='text/javascript'>
	var items = [
		{
			id: 'blog',
			height: 328,
			name: '日誌、部落格',
			link: 'blog.deray.org',
			gitLink: 'blog.deray.org'
		},
		{
			id: 'nippon',
			height: 305,
			name: '單車-環日本(2015年)',
			link: 'nippon.deray.org',
			gitLink: 'derayga.github.io/nippon'
		},
		{
			id: 'hokkaido',
			height: 325,
			name: '機車-環北海道(2014年)',
			link: 'blog.deray.org/hokkaido',
			gitLink: 'blog.deray.org/hokkaido'
		},
		{
			id: 'tibet',
			height: 270,
			name: '單車-西藏：青藏線(2013年)',
			link: 'blog.deray.org/tibet',
			gitLink: 'derayga.github.io/tibet'
		},
		{
			id: 'franceWithMisasa',
			height: 284,
			name: '背包-火車環法國(2012年)',
			link: 'blog.deray.org/franceWithMisasa',
			gitLink: 'derayga.github.io/franceWithMisasa'
		},
		{
			id: 'btp',
			height: 293,
			name: '單車-北京到巴黎(2007年)',
			link: 'btp.deray.org',
			gitLink: 'derayga.github.io/btp'
		},
		{
			id: 'kyoto',
			height: 250,
			name: '背包-京都、大阪(2006年)',
			link: 'blog.deray.org/kyoto',
			gitLink: 'derayga.github.io/kyoto'
		},
		{
			id: 'france',
			height: 296,
			name: '單車-環法國(2005年)',
			link: 'france.deray.org',
			gitLink: 'derayga.github.io/france'
		},
		{
			id: 'bicycle',
			height: 284,
			name: '單車-環台(2003年)',
			link: 'bicycle.deray.org',
			gitLink: 'derayga.github.io/bicycle'
		}
	];

	$( document ).ready(function() {
		var width = 342;
		var isGit = (window.location.href.toLowerCase().indexOf('derayga.github.io') > -1);

		if(isGit)
			window.document.title += ' - GitHub 版本';

		$.each(items, function(index, item){
			var link = (isGit) ? item.gitLink : item.link;

			var a = $(document.createElement('a')).attr({
				href: 'http://' + link
			});
			var gridItem = $(document.createElement('div')).addClass('grid-item').height(item.height).width(width);

			var image = $(new Image()).attr({
				src: 'image/' + item.id + '.jpg',
				name: '#' + item.id,
				title: item.name,
				height: item.height + 'px',
				width: width + 'px'
			}).hide()[0];

			image.context = $(document.createElement('div')).attr({
				id: item.id
			}).html(item.name + '<br/><a href="http://' + link + '">' + link + '</a>').hide();

			$('.grid').append($(gridItem).append($(a).append($(image)).append($(image.context))));
		});

		$('.grid').masonry({
			itemSelector: '.grid-item',
			columnWidth: width,
			gutter: 0
		});

		$.each($('.grid img:hidden'), function(index, image){
			$(image).delay(index*70).fadeIn({
				duration:330,
				complete: function(){
					$(image).capty({
			  			animation: 'fixed',
						height:   60,
						opacity:  0.75
					});
					$(image.context).fadeIn(500);
				}
			});
		});
	});
</script>
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-1041499-1', 'auto');
	ga('send', 'pageview');
</script>
</html>
